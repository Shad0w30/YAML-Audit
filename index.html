<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K8s Security Scanner</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”’ K8s Security Scanner</h1>
            <p>Advanced security analysis for Kubernetes and Docker configurations</p>
        </div>

        <div class="main-card">
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('input')">ğŸ“ Input</button>
                <button class="tab-btn" onclick="switchTab('results')">ğŸ“Š Results</button>
                <button class="tab-btn" onclick="switchTab('fixes')">ğŸ”§ Auto-Fixes</button>
            </div>

            <div id="input-tab" class="tab-content active">
                <div class="input-section">
                    <label for="config-input">Paste your Kubernetes YAML or Docker Compose configuration:</label>
                    <textarea id="config-input" placeholder="Paste your YAML configuration here..."></textarea>
                </div>
                <div class="controls">
                    <button class="btn btn-primary" onclick="scanConfiguration()">ğŸ” Scan Configuration</button>
                    <select id="input-type" class="select-input">
                        <option value="yaml">YAML</option>
                        <option value="json">JSON</option>
                    </select>
                    <button class="btn btn-secondary" onclick="loadSample()">ğŸ“„ Load Sample</button>
                    <button class="btn btn-info" onclick="clearInput()">ğŸ—‘ï¸ Clear</button>
                </div>
            </div>

            <div id="results-tab" class="tab-content">
                <div id="summary-section"></div>
                <div class="filter-bar" id="filter-bar" style="display: none;">
                    <button class="filter-btn active" onclick="filterFindings('all')">All</button>
                    <button class="filter-btn" onclick="filterFindings('Critical')">Critical</button>
                    <button class="filter-btn" onclick="filterFindings('High')">High</button>
                    <button class="filter-btn" onclick="filterFindings('Medium')">Medium</button>
                    <button class="filter-btn" onclick="filterFindings('Low')">Low</button>
                    <button class="filter-btn" onclick="filterFindings('Info')">Info</button>
                </div>
                <div id="results-section"></div>
                <div class="controls" id="export-controls" style="display: none;">
                    <button class="btn btn-danger" onclick="exportPDF()">ğŸ“„ Download PDF Report</button>
                    <button class="btn btn-success" onclick="exportExcel()">ğŸ“¥ Download Excel</button>
                    <button class="btn btn-info" onclick="exportJSON()">ğŸ“¥ Download JSON</button>
                </div>
            </div>

            <div id="fixes-tab" class="tab-content">
                <h2 style="margin-bottom: 20px; color: #495057;">ğŸ”§ Automatic Fixes</h2>
                <div id="fixes-section"></div>
                <div class="controls" id="fix-controls" style="display: none;">
                    <button class="btn btn-success" onclick="downloadFixes()">ğŸ“¥ Download Fixed Config</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden PDF Report Template -->
    <div id="pdf-template" style="display: none;">
        <div id="pdf-content" style="padding: 40px; font-family: Arial, sans-serif; max-width: 800px;">
            <div style="text-align: center; margin-bottom: 40px; border-bottom: 3px solid #667eea; padding-bottom: 20px;">
                <h1 style="color: #667eea; font-size: 32px; margin-bottom: 10px;">Security Scan Report</h1>
                <h2 style="color: #6c757d; font-size: 18px; font-weight: normal;">Kubernetes & Docker Configuration Analysis</h2>
                <p style="color: #6c757d; margin-top: 10px;" id="pdf-date"></p>
            </div>

            <div id="pdf-summary" style="margin-bottom: 40px;">
                <h2 style="color: #495057; font-size: 24px; margin-bottom: 20px; border-left: 4px solid #667eea; padding-left: 15px;">Executive Summary</h2>
                <div id="pdf-summary-stats" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 15px; margin-bottom: 20px;"></div>
                <div id="pdf-summary-text" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 20px;"></div>
            </div>

            <div id="pdf-findings" style="margin-bottom: 40px;">
                <h2 style="color: #495057; font-size: 24px; margin-bottom: 20px; border-left: 4px solid #667eea; padding-left: 15px;">Detailed Findings</h2>
                <div id="pdf-findings-content"></div>
            </div>

            <div id="pdf-recommendations" style="margin-bottom: 40px;">
                <h2 style="color: #495057; font-size: 24px; margin-bottom: 20px; border-left: 4px solid #667eea; padding-left: 15px;">Recommendations</h2>
                <div id="pdf-recommendations-content"></div>
            </div>

            <div style="margin-top: 60px; padding-top: 20px; border-top: 2px solid #e9ecef; text-align: center; color: #6c757d; font-size: 12px;">
                <p>Generated by K8s & Docker Security Scanner</p>
                <p>This report is for informational purposes only. Please consult with security professionals for production environments.</p>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
